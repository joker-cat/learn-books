<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>享讀</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/assets/scss/all.scss">
</head>

<body>
    <%- include('./layout/navbar'); -%>
        <%- include('./layout/banner'); -%>
            <aside>
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-lg-6">
                            <div class="input-group mb-3 ">
                                <span class="input-group-text bg-primary text-white" id="basic-addon1"><i
                                        class="bi bi-search"></i></span>
                                <input type="text" class="form-control bg-white" placeholder="尋找學習類型"
                                    aria-label="LearnType" aria-describedby="basic-addon1">
                                <button class="btn btn-primary px-5">搜尋</button>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-4 text-lg-end ">
                            <div class="d-grid">
                                <a href="bookClub-edit.html" class="create-article">
                                    <button style="width: 100%;" class="btn btn-primary px-5">＋發起讀書會</button>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
            <main class="infoCardArea">
                <div class="container">
                    <div class="row row-cols-lg-4 row-cols-md-3 row-cols-1 infoCardList"></div>
                </div>
            </main>
            <%- include('./layout/footer'); -%>
                <script type="module">
                    import { init, renderData, getInfoStatus } from "/api/_bookclub.js";
                    const infoRender = document.querySelector('.infoCardList');
                    const createArticle = document.querySelector('.create-article');
                    const userId = sessionStorage.getItem("id");

                    async function bookInit(params) {
                        const result = await init();
                        const infoStatus = await getInfoStatus(userId);
                        const renderView = await renderData(result);
                        if (infoStatus === 0) {
                            createArticle.setAttribute("onclick", "return false;");
                        }
                        createArticle.addEventListener('click', () => {
                            (infoStatus === 0)?alert('請到"帳號設定"裡面填寫基本必填項目。'):null;
                        })
                        infoRender.innerHTML = renderView;
                    }
                    bookInit();
                </script>
</body>

</html>